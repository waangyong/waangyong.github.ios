{"version":3,"sources":["webpack:///src/components/City/index.vue","webpack:///./src/components/City/index.vue?9d54","webpack:///./src/components/City/index.vue","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["City","name","data","a","cityList","hotList","isLoading","mounted","_this","this","window","localStorage","getItem","Json","parse","setTimeout","axios","get","then","res","_formatCityList","formatCityList","cities","setItem","stringify_default","catch","console","log","methods","i","length","ishot","push","firstLetter","py","substring","toUpperCase","toCom","index","list","na","id","j","sort","n1","n2","handleToIndex","h2","$refs","city_sort","getElementsByTagName","city_list","toScrollTop","offsetTop","handleToCity","$store","commit","$router","components_City","render","_vm","_h","$createElement","_c","_self","staticClass","ref","_v","_l","item","key","on","tap","$event","_s","itemlist","touchstart","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"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","file":"static/js/2.9878a1800208f17b6fd0.js","sourcesContent":["<template>\n  <div class=\"city_body\">\n      <div class=\"city_list\">\n        <loading v-if=\"isLoading\"></loading>\n        <scroller ref=\"city_list\" v-else>\n          <div>\n            <div class=\"city_hot\">\n              <h2>热门城市</h2>\n              <ul class=\"clearfix\" >\n                <li v-for=\"(i,item) in cityList\" :key=\"item.id\" @tap=\"handleToCity(i.list[0].na,i.list[0].id)\">{{i.list[0].na}}</li>\n              </ul>\n            </div>\n            <div class=\"city_sort\" ref=\"city_sort\">\n              <div v-for=\"item in cityList\" :key=\"item.index\">\n                <h2>{{item.index}}</h2>\n                <ul>\n                  <li v-for=\"itemlist in item.list\" :key=\"itemlist.na\">{{itemlist.na}}</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </scroller>\n\n\n      </div>\n    <div class=\"city_index\">\n      <ul>\n        <li v-for=\"(item,index) in cityList\" :key=\"item.index\" @touchstart=\"handleToIndex(index)\">{{item.index}}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\n    export default {\n        name: \"city\",\n      data(){\n          return {\n            a:0,\n            //保存返回的所有城市\n            cityList:[],\n            //保存返回的热门城市\n            hotList:[],\n            isLoading:true\n          }\n      },\n      mounted() {\n          var cityList = window.localStorage.getItem(cityList);\n          var hotList = window.localStorage.getItem(hotList);\n          if (cityList && hotList){\n            this.cityList=Json.parse(cityList);\n            this.hotList=Json.parse(hotList);\n          } else {\n            setTimeout(()=>{\n              this.axios.get('http://localhost:8080/static/city.json?id=10')\n                .then((res)=>{\n                  //调用格式化城市的方法\n                  var {cityList,hotList}=this.formatCityList(res.data.data.cities);\n                  this.cityList=cityList;\n                  this.hotList = hotList;\n                  window.localStorage.setItem(\"cityList\",JSON.stringify(cityList));\n                  window.localStorage.setItem(\"hotList\",JSON.stringify(hotList));\n                  this.isLoading=!this.isLoading\n                })\n                .catch(()=>{console.log(\"请求错误\")})\n            },1000)\n          }\n\n      },\n\n      methods:{\n        formatCityList(data) {\n          var cityList=[];\n          var hotList=[];\n          for (var i = 0;i<data.length;i++){\n            if(data[i].ishot==11){\n              hotList.push(data[i])\n            }\n          }\n          for(var i=0;i<data.length;i++){\n            var firstLetter = data[i].py.substring(0,1).toUpperCase();\n            if (toCom(firstLetter)){\n              cityList.push({index:firstLetter,list:[{na:data[i].na,id:data[i].id,}]})\n            }\n            else {\n              for (var j=0;j<cityList.length;j++){\n                if(cityList[j].index === firstLetter){\n                  cityList[j].list.push({na:data[i].na,id:data[i].id})\n                }\n              }\n            }\n          }\n          cityList.sort((n1,n2)=>{\n            if(n1.index>n2.index){\n              return 1\n            }\n          });\n          function toCom(firstLetter) {\n            for(var i= 0;i<cityList.length;i++){\n              if(cityList[i].index === firstLetter){\n                return false;\n              }\n            }\n            return true;\n          }\n          return {\n            cityList,\n            hotList\n          }\n       },\n        handleToIndex(index){\n          var h2 = this.$refs.city_sort.getElementsByTagName('h2');\n          //this.$refs.city_sort.parentNode.scrollTop=h2[index].offsetTop\n          this.$refs.city_list.toScrollTop(-h2[index].offsetTop)\n        },\n        //处理点击跳转\n        handleToCity(na,id){\n          //改变状态管理\n          this.$store.commit('city/CITY_INFO',{na,id})\n          //本地保存点击之后的城市\n          window.localStorage.setItem('nowNum',id);\n          window.localStorage.setItem('nowName',na);\n          this.$router.push('/movie/nowPlaying');\n        }\n      }\n    }\n</script>\n\n<style scoped>\n   .city_body{margin-top: 85px;display: flex;width: 100%;position: absolute;top: 0;bottom: 0}\n  .city_body .city_list{flex:1;overflow: auto;background: #fff5f0;}\n  .city_body .city_list::-webkit-scrollbar{background-color: transparent;width: 0}\n  .city_body .city_hot{margin-top: 20px}\n  .city_body .city_hot h2{padding-left: 15px;line-height: 30px;font-size: 14px;background: #f0f0f0;}\n  .city_body .city_hot ul li{float: left;background: #fff;width: 29%;height: 33px;margin-top: 15px;margin-left: 10px;text-align: center;line-height: 33px;box-sizing: border-box}\n  .city_body .city_sort div{margin-top: 20px}\n   .city_body .city_sort h2{padding-left: 15px;line-height: 30px;font-size: 14px;background: #f0f0f0;}\n  .city_body .city_sort ul{padding-left: 15px;line-height: 30px;font-size: 14px;background: #f0f0f0}\n   .city_body .city_sort ul li{line-height: 30px;}\n  .city_body .city_index{width: 20px;display: flex;flex-direction: column;justify-content: center;text-align: center}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/City/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"city_body\"},[_c('div',{staticClass:\"city_list\"},[(_vm.isLoading)?_c('loading'):_c('scroller',{ref:\"city_list\"},[_c('div',[_c('div',{staticClass:\"city_hot\"},[_c('h2',[_vm._v(\"热门城市\")]),_vm._v(\" \"),_c('ul',{staticClass:\"clearfix\"},_vm._l((_vm.cityList),function(i,item){return _c('li',{key:item.id,on:{\"tap\":function($event){return _vm.handleToCity(i.list[0].na,i.list[0].id)}}},[_vm._v(_vm._s(i.list[0].na))])}),0)]),_vm._v(\" \"),_c('div',{ref:\"city_sort\",staticClass:\"city_sort\"},_vm._l((_vm.cityList),function(item){return _c('div',{key:item.index},[_c('h2',[_vm._v(_vm._s(item.index))]),_vm._v(\" \"),_c('ul',_vm._l((item.list),function(itemlist){return _c('li',{key:itemlist.na},[_vm._v(_vm._s(itemlist.na))])}),0)])}),0)])])],1),_vm._v(\" \"),_c('div',{staticClass:\"city_index\"},[_c('ul',_vm._l((_vm.cityList),function(item,index){return _c('li',{key:item.index,on:{\"touchstart\":function($event){return _vm.handleToIndex(index)}}},[_vm._v(_vm._s(item.index))])}),0)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-47c66b39\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/City/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-47c66b39\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-47c66b39\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-47c66b39\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/City/index.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 2","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 2"],"sourceRoot":""}