webpackJsonp([2],{RXOf:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("mvHQ"),s=n.n(e),o={name:"city",data:function(){return{a:0,cityList:[],hotList:[],isLoading:!0}},mounted:function(){var t=this,i=window.localStorage.getItem(i),n=window.localStorage.getItem(n);i&&n?(this.cityList=Json.parse(i),this.hotList=Json.parse(n)):setTimeout(function(){t.axios.get("http://localhost:8080/static/city.json?id=10").then(function(i){var n=t.formatCityList(i.data.data.cities),e=n.cityList,o=n.hotList;t.cityList=e,t.hotList=o,window.localStorage.setItem("cityList",s()(e)),window.localStorage.setItem("hotList",s()(o)),t.isLoading=!t.isLoading}).catch(function(){console.log("请求错误")})},1e3)},methods:{formatCityList:function(t){for(var i=[],n=[],e=0;e<t.length;e++)11==t[e].ishot&&n.push(t[e]);for(e=0;e<t.length;e++){var s=t[e].py.substring(0,1).toUpperCase();if(a(s))i.push({index:s,list:[{na:t[e].na,id:t[e].id}]});else for(var o=0;o<i.length;o++)i[o].index===s&&i[o].list.push({na:t[e].na,id:t[e].id})}function a(t){for(var n=0;n<i.length;n++)if(i[n].index===t)return!1;return!0}return i.sort(function(t,i){if(t.index>i.index)return 1}),{cityList:i,hotList:n}},handleToIndex:function(t){var i=this.$refs.city_sort.getElementsByTagName("h2");this.$refs.city_list.toScrollTop(-i[t].offsetTop)},handleToCity:function(t,i){this.$store.commit("city/CITY_INFO",{na:t,id:i}),window.localStorage.setItem("nowNum",i),window.localStorage.setItem("nowName",t),this.$router.push("/movie/nowPlaying")}}},a={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"city_body"},[n("div",{staticClass:"city_list"},[t.isLoading?n("loading"):n("scroller",{ref:"city_list"},[n("div",[n("div",{staticClass:"city_hot"},[n("h2",[t._v("热门城市")]),t._v(" "),n("ul",{staticClass:"clearfix"},t._l(t.cityList,function(i,e){return n("li",{key:e.id,on:{tap:function(n){return t.handleToCity(i.list[0].na,i.list[0].id)}}},[t._v(t._s(i.list[0].na))])}),0)]),t._v(" "),n("div",{ref:"city_sort",staticClass:"city_sort"},t._l(t.cityList,function(i){return n("div",{key:i.index},[n("h2",[t._v(t._s(i.index))]),t._v(" "),n("ul",t._l(i.list,function(i){return n("li",{key:i.na},[t._v(t._s(i.na))])}),0)])}),0)])])],1),t._v(" "),n("div",{staticClass:"city_index"},[n("ul",t._l(t.cityList,function(i,e){return n("li",{key:i.index,on:{touchstart:function(i){return t.handleToIndex(e)}}},[t._v(t._s(i.index))])}),0)])])},staticRenderFns:[]};var r=n("VU/8")(o,a,!1,function(t){n("e5uV")},"data-v-47c66b39",null);i.default=r.exports},e5uV:function(t,i){},mvHQ:function(t,i,n){t.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(t,i,n){var e=n("FeBl"),s=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}}});
//# sourceMappingURL=2.9878a1800208f17b6fd0.js.map